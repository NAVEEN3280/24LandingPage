<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Twenty4</title>
    <link rel="stylesheet" href="style2.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  </head>
  <body>
    <div class="logo">
      <a href="index.html"><img src="images/logo.png" alt="logo" /></a>
      <p>
        India's First platform that connects Manufacturers and Retailers,
        creating an innovative and transparent approach to jewellery buying and
        selling. We bridge the gap between Manufacturers and Retailers, making
        jewellery sourcing and selling Faster, Smarter and Hassle-free.
      </p>
    </div>
    <div class="nav-tabs">
      <button class="nav-btn" onclick="handleNavClick(1, 'manufacturer')">
        Manufacturer
      </button>
      <button class="nav-btn" onclick="handleNavClick(2, 'channel-partner')">
        Channel Partner
      </button>
      <button class="nav-btn" onclick="handleNavClick(3, 'retailer')">
        Retailer
      </button>
    </div>

    <div class="form-sections">
  <form id="manufacturer-form" class="role-form" data-role="Manufacturer">
    <h3>Manufacturer</h3>
    <input type="text" name="name" placeholder="Name" required />
    <input type="email" name="email" placeholder="Email" required />
    <input type="tel" name="phone" placeholder="Phone Number" required pattern="^\d{10}$" title="Phone number must be 10 digits" />
    <select name="city" required>
      <option value="" disabled selected>Select your city</option>
      <option>Mumbai</option>
      <option>Delhi</option>
      <option>Bangalore</option>
      <option>Hyderabad</option>
      <option>Ahmedabad</option>
      <option>Chennai</option>
      <option>Kolkata</option>
      <option>Pune</option>
      <option>Jaipur</option>
      <option>Lucknow</option>
      <option>Indore</option>
      <option>Surat</option>
      <option>Patna</option>
      <option>Chandigarh</option>
    </select>
    <button type="submit">Submit</button>
  </form>

  <form id="channel-partner-form" class="role-form" data-role="Channel Partner">
    <h3>Channel Partner</h3>
    <input type="text" name="name" placeholder="Name" required />
    <input type="email" name="email" placeholder="Email" required />
    <input type="tel" name="phone" placeholder="Phone Number" required pattern="^\d{10}$" title="Phone number must be 10 digits" />
    <select name="city" required>
      <option value="" disabled selected>Select your city</option>
      <option>Mumbai</option>
      <option>Delhi</option>
      <option>Bangalore</option>
      <option>Hyderabad</option>
      <option>Ahmedabad</option>
      <option>Chennai</option>
      <option>Kolkata</option>
      <option>Pune</option>
      <option>Jaipur</option>
      <option>Lucknow</option>
      <option>Indore</option>
      <option>Surat</option>
      <option>Patna</option>
      <option>Chandigarh</option>
    </select>
    <button type="submit">Submit</button>
  </form>

  <form id="retailer-form" class="role-form" data-role="Retailer">
    <h3>Retailer</h3>
    <input type="text" name="name" placeholder="Name" required />
    <input type="email" name="email" placeholder="Email" required />
    <input type="tel" name="phone" placeholder="Phone Number" required pattern="^\d{10}$" title="Phone number must be 10 digits" />
    <select name="city" required>
      <option value="" disabled selected>Select your city</option>
      <option>Mumbai</option>
      <option>Delhi</option>
      <option>Bangalore</option>
      <option>Hyderabad</option>
      <option>Ahmedabad</option>
      <option>Chennai</option>
      <option>Kolkata</option>
      <option>Pune</option>
      <option>Jaipur</option>
      <option>Lucknow</option>
      <option>Indore</option>
      <option>Surat</option>
      <option>Patna</option>
      <option>Chandigarh</option>
    </select>
    <button type="submit">Submit</button>
  </form>

  <div id="thankYouMessage" class="thank-you-message">
    <div class="tick-container">
      <svg class="tick-circle" viewBox="0 0 52 52">
        <circle class="tick-bg" cx="26" cy="26" r="25" fill="none" />
        <path class="tick-check" fill="none" d="M14 27l7 7 17-17" />
      </svg>
    </div>
    <h3>Thank you, <span id="userNameDisplay"></span>!</h3>
    <p>Thanks for your interest. Our team will get in touch with you shortly.</p>
  </div>
</div>


    <div class="carousel-wrapper">
      <div class="carousel">
        <div class="bg-box">
          <div class="bg active"></div>
          <div class="bg"></div>
          <div class="bg"></div>
          <div class="bg"></div>
        </div>
        <div class="img-box">
          <div class="img-list">
            <div class="img-slider">
              <div class="img-item fruit active" style="--i: 0">
                <img src="images/img2 (3).png" />
              </div>
              <div class="img-item fruit" style="--i: 1">
                <img src="images/img1 (3).png" />
              </div>
              <div class="img-item fruit" style="--i: 2">
                <img src="images/img3 (3).png" />
              </div>
              <div class="img-item fruit" style="--i: 3">
                <img src="images/img4 (3).png" />
              </div>
              <div class="img-item" style="--i: 0">
                <img src="images/j1.png" />
              </div>
              <div class="img-item" style="--i: 1">
                <img src="images/j2.png" />
              </div>
              <div class="img-item" style="--i: 2">
                <img src="images/j3.png" />
              </div>
              <div class="img-item" style="--i: 3">
                <img src="images/j4.png" />
              </div>
            </div>
          </div>
        </div>
        <div class="info-box">
          <div class="info-slider">
            <div class="info-item">
              <h2>Our Socials</h2>
              <p>Check our social media for the latest updates!</p>
              <p>
                <ul class="social">
                <li>
                  <a
                    href="https://www.instagram.com/twenty4jewellery/"
                    target="_blank"
                    ><i class="fa-brands fa-instagram"></i
                  ></a>
                </li>
                <li>
                  <a
                    href="https://www.facebook.com/profile.php?id=61567683001332"
                    target="_blank"
                    ><i class="fa-brands fa-facebook-f"></i
                  ></a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/company/twenty4jewellery/"
                    target="_blank"
                    ><i class="fa-brands fa-linkedin-in"></i
                  ></a>
                </li>
              </ul>
              </p>
            </div>
            <div class="info-item">
              <h2>Manufacturer</h2>
              <p>
                With Twenty4, you can:
                <li>Expand operations across India with ease.</li>
                <li>Ensure insured delivery, regardless of distance.</li>
                <li>Access greater scope for R&D and innovation.</li>
              </p>
            </div>
            <div class="info-item">
              <h2>Channel Partner</h2>
              <p>
                With Twenty4, you benefit from:
                <li>Stock investment only against confirmed orders.</li>
                <li>Seamless product sourcing from any location.</li>
                <li>Zero-risk vendor payments with secure processes.</li>
              </p>
            </div>
            <div class="info-item">
              <h2>Retailer</h2>
              <p>With Twenty4, you enjoy:</p>
              <li>Easy access to a vast vendor network.</li>
              <li>
                Simplified team delegation and follow-ups through a unified
                platform.
              </li>
              <li>
                Regular product insights via expert-led online/offline seminars.
              </li>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button id="downloadExcel" style="display: none;">Download Excel</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <script
      src="https://kit.fontawesome.com/d114828075.js"
      crossorigin="anonymous"
    ></script>
    <script>
      const imgSlider = document.querySelector(".img-slider");
      const imgFruit = document.querySelectorAll(".img-item.fruit");
      const infoSlider = document.querySelector(".info-slider");
      const bgs = document.querySelectorAll(".bg-box .bg");
      const navTabs = document.querySelector(".nav-tabs");
      const formSections = document.querySelector(".form-sections");
      const forms = document.querySelectorAll(".role-form");
    
      let currentIndex = 0;
      const formEntries = [];
    
      function goToSlide(index) {
        currentIndex = index;
        imgSlider.style.transform = `rotate(${-90 * index}deg)`;
    
        document.querySelector(".fruit.active").classList.remove("active");
        imgFruit[index].classList.add("active");
    
        document.querySelector(".bg.active").classList.remove("active");
        bgs[index].classList.add("active");
    
        const infoItems = document.querySelectorAll(".info-item");
        infoItems.forEach((item, i) => {
          if (i === index) {
            item.style.display = "block";
            item.classList.add("active");
            gsap.fromTo(
              item,
              { opacity: 0, y: 20 },
              { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" }
            );
          } else {
            item.style.display = "none";
            item.classList.remove("active");
          }
        });
      }
    
      function handleNavClick(index, type) {
  goToSlide(index);

  const targetForm = document.getElementById(`${type}-form`);

  if (!targetForm) {
    console.error(`Form with type "${type}" not found.`);
    return;
  }

  formSections.style.display = "flex";

  forms.forEach((form) => {
  if (form !== targetForm) {
    // Animate hiding other forms
    gsap.to(form, {
      scale: 0.8,
      opacity: 0,
      duration: 0.3,
      onComplete: () => {
        form.style.display = "none";
      },
    });
  }
});

// Ensure the target form is visible before animating it in
targetForm.style.display = "flex";
targetForm.style.opacity = 0;
targetForm.style.transform = "translateY(40px) scale(0.8)";

// Animate the target form in
gsap.to(targetForm, {
  opacity: 1,
  y: 0,
  scale: 1,
  duration: 0.6,
  ease: "power2.out",
  onStart: () => {
    // Force reflow to ensure animation triggers properly on subsequent clicks
    void targetForm.offsetWidth;
  },
});

}

    
      function hideForm(formElement) {
  const name = formElement.querySelector('input[name="name"]').value.trim();
  const email = formElement.querySelector('input[name="email"]').value.trim();
  const phone = formElement.querySelector('input[name="phone"]').value.trim();
  const city = formElement.querySelector("select[name='city']").value.trim();
  const role = formElement.querySelector("h3").textContent;

  const emailRegex = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
  const phoneRegex = /^\d{10}$/;

  if (!name || !email || !phone || !city || city === "Select your city") {
    alert("Please fill in all fields before submitting the form.");
    return;
  }

  if (!emailRegex.test(email)) {
    alert("Please enter a valid email address.");
    return;
  }

  if (!phoneRegex.test(phone)) {
    alert("Phone number must be exactly 10 digits.");
    return;
  }
    
        fetch("submit.php", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    name,
    email,
    phone,
    city,
    role,
    timestamp: new Date().toLocaleString(),
  }),
})
  .then((res) => res.text())
  .then((data) => {
    console.log(data);  // Log the response from PHP
  })
  .catch((err) => console.error("Error submitting form:", err));

    
        document.getElementById("userNameDisplay").textContent = name || "User";
    
        gsap.to(formElement, {
          opacity: 0,
          scale: 0.9,
          duration: 0.5,
          onComplete: () => {
            formElement.style.display = "none";
            const thankYou = document.getElementById("thankYouMessage");
            thankYou.style.display = "flex";
            gsap.fromTo(
              thankYou,
              { opacity: 0, y: 30, scale: 0.8 },
              { opacity: 1, y: 0, scale: 1, duration: 0.6, ease: "power2.out" }
            );
    
            setTimeout(() => {
              thankYou.style.display = "none";
              formSections.style.display = "none";
              document.querySelector(".carousel-wrapper").style.display = "block";
              navTabs.style.display = "flex";
              gsap.fromTo(
                ".nav-tabs button",
                { opacity: 0, y: -20 },
                { opacity: 1, y: 0, duration: 0.5, stagger: 0.1 }
              );
            }, 4000);
          },
        });
      }
    
      // Attach submit listeners to each form
      forms.forEach((form) => {
        form.addEventListener("submit", function (e) {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    data.role = form.getAttribute("data-role");
    data.timestamp = new Date().toISOString();

    fetch("submit.php", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(data),
    })
      .then((res) => res.text())
      .then((response) => {
        console.log(response); // Debug log

        if (response.includes("saved")) {
          // Animate form out
          gsap.to(form, {
            scale: 0.8,
            opacity: 0,
            duration: 0.4,
            onComplete: () => {
              form.style.display = "none";

              // Set name in thank you message
              document.getElementById("userNameDisplay").textContent = data.name;

              const thankYou = document.getElementById("thankYouMessage");
              thankYou.style.display = "flex";
              thankYou.style.opacity = 0;
              thankYou.style.transform = "translateY(30px)";

              // Animate thank you message in
              gsap.to(thankYou, {
                opacity: 1,
                y: 0,
                duration: 0.6,
                ease: "power2.out",
              });
              setTimeout(() => {
  gsap.to(thankYou, {
    opacity: 0,
    y: 30,
    duration: 0.5,
    onComplete: () => {
      thankYou.style.display = "none";
      // 👇 Trigger carousel return or reset UI here
      resetToCarousel();
    }
  });
}, 5000);
            },
          });
        } else {
          alert("There was an error. Please try again.");
        }
      })
      .catch((err) => {
        console.error("Submission error:", err);
        alert("Something went wrong. Please check console.");
      });
  });
});
    
      document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "e") {
    e.preventDefault();

    const timestamp = new Date().getTime(); // Bypass cache

    fetch(`form_submissions.csv?t=${timestamp}`)
      .then((response) => {
        if (!response.ok) throw new Error("Failed to fetch CSV file.");
        return response.text();
      })
      .then((csvText) => {
        const rows = csvText.trim().split("\n").map(row => row.split(","));
        if (rows.length <= 1) {
          alert("No data to export.");
          return;
        }

        const worksheet = XLSX.utils.aoa_to_sheet(rows);
        const workbook = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(workbook, worksheet, "Form Submissions");

        XLSX.writeFile(workbook, "form_submissions.xlsx");
      })
      .catch((err) => {
        console.error("Error fetching CSV:", err);
        alert("Error fetching CSV file. Make sure it exists and is accessible.");
      });
  }
});


document.getElementById("adminDownload").addEventListener("click", () => {
  const timestamp = new Date().getTime();
  fetch(`form_submissions.csv?t=${timestamp}`)
    .then((response) => {
      if (!response.ok) throw new Error("Failed to fetch CSV file.");
      return response.text();
    })
    .then((csvText) => {
      const rows = csvText.trim().split("\n").map(row => row.split(","));
      if (rows.length <= 1) {
        alert("No data to export.");
        return;
      }

      const worksheet = XLSX.utils.aoa_to_sheet(rows);
      const workbook = XLSX.utils.book_new();
      XLSX.utils.book_append_sheet(workbook, worksheet, "Form Submissions");

      XLSX.writeFile(workbook, "form_submissions.xlsx");
    })
    .catch((err) => {
      console.error("Error fetching CSV:", err);
      alert("Error fetching CSV file. Make sure it exists and is accessible.");
    });
});

    
      // Manual download button logic
      const downloadBtn = document.getElementById("downloadExcel");
      if (downloadBtn) document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "f") {
    e.preventDefault();

    fetch("form_submissions.csv")
      .then((response) => {
        if (!response.ok) throw new Error("Failed to fetch CSV file.");
        return response.text();
      })
      .then((csvText) => {
        const rows = csvText.trim().split("\n").map(row => row.split(","));
        if (rows.length <= 1) {
          alert("No data to export.");
          return;
        }

        const worksheet = XLSX.utils.aoa_to_sheet(rows);
        const workbook = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(workbook, worksheet, "Form Submissions");

        XLSX.writeFile(workbook, "form_submissions.xlsx");
      })
      .catch((err) => {
        console.error("Error fetching CSV:", err);
        alert("Error fetching CSV file. Make sure it exists and is accessible.");
      });
  }
});

    </script>
    

  </body>
</html>
